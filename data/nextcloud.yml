version: "3.8"
name: data-nextcloud

services:
    nextcloud:
        container_name: hl-nextcloud
        build: ./Dockerfile
        restart: always
        ports:
            - 8080:80
        volumes:
            - hl-v-nextcloud-html:/var/www/html
            - ./nextcloud:/opt/nextcloud/data:rw
        environment:
            NEXTCLOUD_TRUSTED_DOMAINS: "cloud.alemax.site"
            TRUSTED_DOMAINS: "cloud.alemax.site"
            OVERWRITEHOST: "cloud.alemax.site"
            OVERWRITEPROTOCOL: "https"
            OVERWRITECONDADDR: "^192\\.168\\.0\\.21$"
            OVERWRITECLIURL: "https://cloud.alemax.site"
            NEXTCLOUD_DATA_DIR: "/opt/nextcloud/data"
            NEXTCLOUD_TRUSTED_PROXIES: "192.168.0.21"
volumes:
    hl-v-nextcloud-data:
    hl-v-nextcloud-html:
    hl-v-nextcloud-db:
